# MySQL重要知识点

### 一条 SQL 语句在 MySQL 中如何被执行的?

::: details answer

![](https://cdn.jsdelivr.net/gh/River-Cold/pictureBed/vuepress-blog/docs/interview/basics/database/MySQL基础架构.png)

MySQL主要分为**Server层**和**存储引擎层**。

**Server层**：包括连接器、查询缓存、分析器、优化器、执行器等，涵盖MySQL的核心功能。

**存储引擎层**：负责数据的存储和提取。

- 查询`select`语句的执行流程如下：
  - 连接器：管理连接，权限验证
  - 查询缓存：判断是否命中缓存，如果命中缓存则直接返回结果
  - 分析器：词法分析，语法分析
    - 词法分析：提取 sql 语句的关键元素，以`select`为例，提取出查询的表名、查询的列名（字段）、查询条件等。
    - 语法分析：判断查询关键词是否正确
  - 优化器：根据优化算法选择执行方案
  - 执行器：判断当前用户对当前表是否有查询权限，如果有则调用引擎提供的读接口，返回查询结果

- 更新语句的执行流程和查询语句的流程类似：
  - 连接器：管理连接，权限验证
  - 分析器：词法分析，语法分析
    - 词法分析：提取 sql 语句的关键元素，以`update`为例，提取出更新的表名、更新的列名（字段）、更新条件等。
    - 语法分析：判断查询关键词是否正确
  - 优化器：根据优化算法选择执行方案
  - 执行器：判断当前用户对当前记录是否有更新权限， 如果有则调用引擎提供的写接口，返回更新结果

::: 



